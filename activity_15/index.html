<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8"> 
<title>Type your name: Activity 15</title>

</head>
<body>

<h1>Type your name: Activity 15</h1>

<script src="https://cdn.jsdeliver.net/npm/axios/dist/axios/min.js"></script>

<script type="text/javascript"> 


// making a specific  request using API headers
const getYear = async()=>{
    const config = {headers: {accept: 'application/json'}};
    const res = await axios.get('https://awapi.dev/api/people/1/')

    console.log("using headers in axios. NAME: ", res.data.name,"BIRTH YEAR:", res.data.birth_year);
}


// choosing specific response
const personID = async(id) =>{
try{
    const res = await axios.get(`https://swapi.dev/api/people/${id}`);
    console.log(res.data)
}catch(e){
    console.log(`Error!`,e)
}
}



//making request using axios
let axios = axios.get("https://swapi.dev/api/people/1")

    .then(res => {
        console.log("Response using axios",res)
    })


// try and  catch statment in fetch 
// making multiple requests using  fetch 


const loadpeople = async () => {

try{
    const tres = await fetch('https://swapi.co/api/people/1/')
    const data = await tres.json()
    console.log(`Multiple response using fetch ,1 st person`, data)
    const res2 = await fetch('https://swapi.co/api/people/2000/')
    const data2 = await res2.json()
    console.log(`Multiple response using fetch ,2 nd person`, data2)
}catch(err){
    console.log(`Error`, err)
}
}


// Making an AJAX request using fetch
fetch ("https://swapi.dev/api/people/1/")
.then((res)=>{
    console.log("LOADED! : using fetch",res)
    res.json().then((data)=>console.log("json result using fetch", ))
})


// Making  an AJAX request using XHR
const req = new XMLHttpRequest();
req.onload = function(){
    console.log("LOADED! : using XHR");
    console.log(this.response)  
    const person = JSON.parse(this.response)
    console.log(`NAME: ${person.name} , HEIGHT ${person.height}`)
}


req.onerror = function(){
    console.log('ERROR!');
    console.log(this)
}



req.open("GET", "https://swapi.dev/api/people/1/");
req.send();


</script>
</body>
</html>
